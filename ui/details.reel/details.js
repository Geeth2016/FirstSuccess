var Component=require("montage/ui/component").Component,sharedTmdbService=require("core/tmdb-service").shared;exports.Details=Component.specialize({isVisible:{value:null},_movie:{value:null},movie:{set:function(e){var t=this;this._movie=e,this.isVisible=!1,null==e||e.loaded?this.isVisible=!0:sharedTmdbService.loadMovie(e).then(function(n){return t.dispatchBeforeOwnPropertyChange("movie",t._movie),t._movie=n,e.runtime=n.runtime,t.dispatchOwnPropertyChange("movie",t._movie),n}).then(function(e){return sharedTmdbService.loadReleases(e)}).then(function(n){var o=n.countries[0].certification;0===o.length&&(o="none"),e.mpaaRating=t._movie.mpaaRating=o,e.loaded=!0,t.isVisible=!0}).done(),this.needsDraw=!0},get:function(){return this._movie}},draw:{value:function(){if(this.movie){var e=this.movie.popularity;this.popularityIcon.style.backgroundPosition=25>e?"0px 0px":50>e?"-12px 0px":75>e?"-24px 0px":"-36px 0px",this._isDetailsExpanded?this._element.classList.add("expanded"):this._element.classList.remove("expanded")}}},handleRentButtonAction:{value:function(){window.open(this.movie.links.alternate)}},handleTrailerButtonAction:{value:function(){this.dispatchEventNamed("openTrailer",!0,!0,{trailers:this.movie.trailers})}},_isDetailsExpanded:{value:!1},handleExpandButtonAction:{value:function(){this._isDetailsExpanded=!this._isDetailsExpanded,this.needsDraw=!0}}});