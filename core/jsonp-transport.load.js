montageDefine("49c9e31","core/jsonp-transport",{dependencies:["montage/core/core","query-params","url","montage/core/uuid","montage/core/promise"],factory:function(e,r){var o=e("montage/core/core").Montage,n=e("query-params"),t=e("url"),a=e("montage/core/uuid"),l=e("montage/core/promise").Promise;r.JsonpTransport=o.specialize({constructor:{value:function(){}},makeRequest:{value:function(e,r,o){var c,i=l.defer(),u=this,s=t.parse(e),d=n.decode(s.query),m=r?r+"ServiceCallback":"serviceCallback",p=m+a.generate().replace(/-/g,"_"),g=document.createElement("script");return window[p]=function(e){u._handleResponse(e,i),document.head.removeChild(g),delete window[p]},d[o?o:"callback"]=p,c=e.replace(s.query,"")+n.encode(d),g.src=c,document.head.appendChild(g),i.promise}},_handleResponse:{value:function(e,r){e?e.error?r.reject(Error(e.error)):r.resolve(e):r.reject(Error("Unknown API Error"))}}}),r.shared=new r.JsonpTransport}});